!function(e,t,o,s){"use strict";function n(t,o){return this.$element=e(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(o),{options:this.options,init:e.proxy(this.init,this),remove:e.proxy(this.remove,this),getNode:e.proxy(this.getNode,this),getParent:e.proxy(this.getParent,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}}function i(e){t.console&&t.console.error(e)}let d="treeview",r={};r.settings={injectStyle:!0,levels:2,expandIcon:"fa fa-chevron-right",collapseIcon:"fa fa-chevron-down",emptyIcon:"fa",nodeIcon:"",selectedIcon:"",checkedIcon:"fa fa-check-circle-o",uncheckedIcon:"fa fa-circle-thin",color:s,backColor:s,borderColor:s,onhoverColor:"#F5F5F5",selectedColor:"#3498DB",selectedBackColor:"#E7F2FF",searchResultColor:"#D9534F",searchResultBackColor:s,enableLinks:!1,enableIndent:!0,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,customizeNode:null,addVerticalLine:null,customizeBadges:null,customContent:!1,nodeContentSelector:"span",nodeContentAttributes:{},onNodeChecked:s,onNodeCollapsed:s,onNodeDisabled:s,onNodeEnabled:s,onNodeExpanded:s,onNodeSelected:s,onNodeUnchecked:s,onNodeUnselected:s,onSearchComplete:s,onSearchCleared:s},r.options={silent:!1,ignoreChildren:!1},r.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},n.prototype.init=function(t){this.tree=[],this.nodes=[],t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},r.settings,t),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},n.prototype.remove=function(){this.destroy(),e.removeData(this,d),e("#"+this.styleId).remove()},n.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},n.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},n.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",e.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},n.prototype.setInitialStates=function(t,o){if(t.nodes){o+=1;let s=t,n=this;e.each(t.nodes,function(e,t){t.nodeId=n.nodes.length,t.parentId=s.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!1),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&o<n.options.levels&&t.nodes&&0<t.nodes.length?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),n.nodes.push(t),t.nodes&&n.setInitialStates(t,o)})}},n.prototype.clickHandler=function(t){this.options.enableLinks||t.preventDefault();let o=e(t.target);if((t=this.findNode(o))&&!t.state.disabled){let s=o.attr("class")?o.attr("class").split(" "):[];-1!==s.indexOf("expand-icon")?this.toggleExpandedState(t,r.options):-1!==s.indexOf("check-icon")?this.toggleCheckedState(t,r.options):t.selectable?this.toggleSelectedState(t,r.options):this.toggleExpandedState(t,r.options),this.render()}},n.prototype.findNode=function(e){return e=e.closest("li.list-group-item").attr("data-nodeid"),(e=this.nodes[e])||console.log("Error: node does not exist"),e},n.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},n.prototype.setExpandedState=function(t,o,s){o!==t.state.expanded&&(o&&t.nodes?(t.state.expanded=!0,s.silent||this.$element.trigger("nodeExpanded",e.extend(!0,{},t))):o||(t.state.expanded=!1,s.silent||this.$element.trigger("nodeCollapsed",e.extend(!0,{},t)),t.nodes&&!s.ignoreChildren&&e.each(t.nodes,e.proxy(function(e,t){this.setExpandedState(t,!1,s)},this))))},n.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},n.prototype.setSelectedState=function(t,o,s){o!==t.state.selected&&(o?(this.options.multiSelect||e.each(this.findNodes("true","g","state.selected"),e.proxy(function(e,t){this.setSelectedState(t,!1,s)},this)),t.state.selected=!0,s.silent||this.$element.trigger("nodeSelected",e.extend(!0,{},t))):(t.state.selected=!1,s.silent||this.$element.trigger("nodeUnselected",e.extend(!0,{},t))))},n.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},n.prototype.setCheckedState=function(t,o,s){o!==t.state.checked&&(o?(t.state.checked=!0,s.silent||this.$element.trigger("nodeChecked",e.extend(!0,{},t))):(t.state.checked=!1,s.silent||this.$element.trigger("nodeUnchecked",e.extend(!0,{},t))))},n.prototype.setDisabledState=function(t,o,s){o!==t.state.disabled&&(o?(t.state.disabled=!0,this.setExpandedState(t,!1,s),this.setSelectedState(t,!1,s),this.setCheckedState(t,!1,s),s.silent||this.$element.trigger("nodeDisabled",e.extend(!0,{},t))):(t.state.disabled=!1,s.silent||this.$element.trigger("nodeEnabled",e.extend(!0,{},t))))},n.prototype.render=function(){this.initialized||(this.$element.addClass(d),this.$wrapper=e(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},n.prototype.buildTree=function(t,o){if(t){o+=1;let s=this;e.each(t,function(t,n){let i=e(s.template.itemWrapper).addClass("node-"+s.elementId).addClass(n.state.checked?"node-checked":"").addClass(n.state.disabled?"node-disabled":"").addClass(n.state.selected?"node-selected":"").addClass(n.searchResult?"search-result":"").attr("data-nodeid",n.nodeId).attr("style",s.buildStyleOverride(n)),d=e(s.template.itemLeftElem),r=e(s.template.itemRightElem);if("function"==typeof s.options.customizeNode&&s.options.customizeNode(i,n,s),i.append(d).append(r),s.options.enableIndent)for(let l=0;l<o-1;l++)d.append(s.template.indent);if(n.nodes&&n.nodes.length>0){let a=["expand-icon"];if(a.push(n.state.expanded?s.options.collapseIcon:s.options.expandIcon),d.append(e(s.template.icon).addClass(a.join(" "))),s.options.showIcon){let h=["node-icon"];h.push(n.icon||s.options.nodeIcon),n.state.selected&&(h.pop(),h.push(n.selectedIcon||s.options.selectedIcon||n.icon||s.options.nodeIcon)),d.append(e(s.template.icon).addClass(h.join(" ")))}}if(s.options.showCheckbox){let c=["check-icon"];c.push(n.state.checked?s.options.checkedIcon:s.options.uncheckedIcon),d.append(e(s.template.icon).addClass(c.join(" ")))}let p;if(s.options.customContent?(p=e("<"+s.options.nodeContentSelector+">",s.options.nodeContentAttributes),s.options.enableLinks&&p.attr("href",n.href),p.append(n.text)):p=n.text,s.options.enableLinks?d.append(e(s.template.link).attr("href",n.href).append(p)):d.append(p),"function"==typeof s.options.addVerticalLine&&s.options.addVerticalLine(d,n,s),s.options.showTags&&n.tags&&(r.empty(),"function"==typeof s.options.customizeBadges?s.options.customizeBadges(r,n,s):e.each(n.tags,function(t,o){r.append(e(s.template.badge).append(o))})),s.$wrapper.append(i),n.nodes&&n.state.expanded&&!n.state.disabled)return s.buildTree(n.nodes,o)})}},n.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";let t=e.color,o=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(o=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(o=this.options.searchResultBackColor)),"color:"+t+";background-color:"+o+";"},n.prototype.injectStyle=function(){this.options.injectStyle&&!o.getElementById(this.styleId)&&e('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},n.prototype.buildStyle=function(){let e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},n.prototype.template={list:'<ul class="list-group"></ul>',itemWrapper:'<li class="list-group-item d-flex justify-content-between align-items-start"></li>',itemLeftElem:'<div class="w-100"></div>',itemRightElem:"<div></div>",indent:'<span class="mx-2"></span>',icon:'<span class="icon"></span>',link:'<a class="w-75" href="#" style="display:inline-block; color:inherit; text-decoration:none;"></a>',badge:'<span class="ms-1 badge bg-primary rounded-pill"></span>'},n.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",n.prototype.getNode=function(e){return this.nodes[e]},n.prototype.getParent=function(e){return e=this.identifyNode(e),this.nodes[e.parentId]},n.prototype.getSiblings=function(e){let t=this.identifyNode(e);return((e=this.getParent(t))?e.nodes:this.tree).filter(function(e){return e.nodeId!==t.nodeId})},n.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},n.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},n.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},n.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},n.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},n.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},n.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},n.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},n.prototype.selectNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},n.prototype.unselectNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},n.prototype.toggleNodeSelected=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},n.prototype.collapseAll=function(t){var o=this.findNodes("true","g","state.expanded");this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},n.prototype.collapseNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},n.prototype.expandAll=function(t){var o;(t=e.extend({},r.options,t))&&t.levels?this.expandLevels(this.tree,t.levels,t):(o=this.findNodes("false","g","state.expanded"),this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))),this.render()},n.prototype.expandNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},n.prototype.expandLevels=function(t,o,s){s=e.extend({},r.options,s),e.each(t,e.proxy(function(e,t){this.setExpandedState(t,0<o,s),t.nodes&&this.expandLevels(t.nodes,o-1,s)},this))},n.prototype.revealNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){let o=this.getParent(e);for(;o;)this.setExpandedState(o,!0,t),o=this.getParent(o)},this)),this.render()},n.prototype.toggleNodeExpanded=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},n.prototype.checkAll=function(t){var o=this.findNodes("false","g","state.checked");this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},n.prototype.checkNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},n.prototype.uncheckAll=function(t){var o=this.findNodes("true","g","state.checked");this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},n.prototype.uncheckNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},n.prototype.toggleNodeChecked=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},n.prototype.disableAll=function(t){var o=this.findNodes("false","g","state.disabled");this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},n.prototype.disableNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},n.prototype.enableAll=function(t){var o=this.findNodes("true","g","state.disabled");this.forEachIdentifier(o,t,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},n.prototype.enableNode=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},n.prototype.toggleNodeDisabled=function(t,o){this.forEachIdentifier(t,o,e.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},n.prototype.forEachIdentifier=function(t,o,s){o=e.extend({},r.options,o),t instanceof Array||(t=[t]),e.each(t,e.proxy(function(e,t){s(this.identifyNode(t),o)},this))},n.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},n.prototype.search=function(t,o){o=e.extend({},r.searchOptions,o),this.clearSearch({render:!1});let s=[];if(t&&0<t.length){o.exactMatch&&(t="^"+t+"$");let n="g";o.ignoreCase&&(n+="i"),s=this.findNodes(t,n),e.each(s,function(e,t){t.searchResult=!0})}return o.revealResults?this.revealNode(s):this.render(),this.$element.trigger("searchComplete",e.extend(!0,{},s)),s},n.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var o=e.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});t.render&&this.render(),this.$element.trigger("searchCleared",e.extend(!0,{},o))},n.prototype.findNodes=function(t,o,s){o=o||"g",s=s||"text";let n=this;return e.grep(this.nodes,function(e){let i=n.getNodeValue(e,s);if("string"==typeof i)return i.match(RegExp(t,o))})},n.prototype.getNodeValue=function(e,t){var o,n=t.indexOf(".");return 0<n?(o=e[t.substring(0,n)],n=t.substring(n+1,t.length),this.getNodeValue(o,n)):e.hasOwnProperty(t)?e[t].toString():s},e.fn[d]=function(t,o){let s;return this.each(function(){let r=e.data(this,d);"string"==typeof t?r?e.isFunction(r[t])&&"_"!==t.charAt(0)?(o instanceof Array||(o=[o]),s=r[t].apply(r,o)):i("No such method : "+t):i("Not initialized, can not call method : "+t):"boolean"==typeof t?s=r:e.data(this,d,new n(this,e.extend(!0,{},t)))}),s||this}}(jQuery,window,document);